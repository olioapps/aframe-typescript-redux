{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./store_aware.ts","webpack:///./index.ts","webpack:///./aframe_wrapper_store_aware.ts","webpack:///../node_modules/aframe-typescript-toolkit/src/index.ts","webpack:///../node_modules/aframe-typescript-toolkit/src/aframe_wrapper.ts","webpack:///../node_modules/aframe-typescript-toolkit/src/entity_builder.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AframeRedux\"] = factory();\n\telse\n\t\troot[\"AframeRedux\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","import { Store } from \"redux\"\n\nexport default class StoreAware<PROPS = {}> {\n    protected localProps: PROPS\n    protected store: Store\n\n    constructor(store: Store, props?: PROPS) {\n        this.localProps = Object.assign({}, props)\n        this.store = store\n\n        store.subscribe( () => {\n            const latestStoreState = store.getState()\n            const keys = Object.keys(this.localProps)\n\n            const nextProps = keys.reduce( \n                (acc, k): any => ({ ...acc, [k]: latestStoreState[k] }), \n                {},\n            )\n            const changed = keys.reduce( \n                (acc, k) => acc || nextProps[k] !== this.localProps[k], false)\n\n            if (changed) {\n                if (this.componentShouldUpdate(this.localProps, nextProps)) {\n                    this.componentWillReceiveProps(this.localProps, nextProps)\n                    this.localProps = {...nextProps}\n                }\n            }\n        })\n    }\n\n    componentShouldUpdate(props: PROPS, nextProps: PROPS): boolean {\n        // override\n        return props !== nextProps\n    }\n\n    componentWillReceiveProps(props: PROPS, nextProps: PROPS): void {\n        // override\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./store_aware.ts","import StoreAware from \"./store_aware\"\nimport { \n    StoreAwareComponent, \n    StoreAwareSystem, \n    StoreAwareRepositoryComponent,\n    dispatch,\n    ReduxConnectedSystem,\n} from \"./aframe_wrapper_store_aware\"\nimport { RepositoryMember, BaseMap, BaseRepository } from \"./core\"\n\nexport {\n    StoreAware,\n    StoreAwareComponent,\n    StoreAwareRepositoryComponent,\n    StoreAwareSystem,\n    ReduxConnectedSystem,\n    dispatch,\n\n    BaseMap,\n    BaseRepository,\n    RepositoryMember,\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./index.ts","import { Store } from \"redux\"\nimport { ComponentWrapper, SystemWrapper } from \"aframe-typescript-toolkit\"\nimport StoreAware from \"./store_aware\"\nimport { BaseRepository, RepositoryMember, BaseMap } from \"./core\"\n\ninterface CanReceiveProps<PROPS> {\n    componentWillReceiveProps: (props: PROPS, nextProps: PROPS) => void\n}\n\nclass Connector<PROPS> extends StoreAware<PROPS> {\n    private receiver: CanReceiveProps<PROPS>\n    constructor(store: Store, props: PROPS, receiver: CanReceiveProps<PROPS>) {\n        super(store, props)\n        this.receiver = receiver\n    }\n\n    componentWillReceiveProps(props: PROPS, nextProps: PROPS): void {\n        this.receiver.componentWillReceiveProps(props, nextProps)\n    }\n}\n\nclass SharedStateContainer<SHARED_STATE> {\n    private sharedState: Map<string, SHARED_STATE> = new Map<string, SHARED_STATE>()\n\n    get(): SHARED_STATE {\n        const state: SHARED_STATE = <SHARED_STATE> this.sharedState.get(\"_\")\n        if (!state) {\n           this.set(null)\n        } else {\n            return state\n        }\n    }\n\n    set(sharedState: SHARED_STATE): void {\n        this.sharedState.set(\"_\", sharedState)\n    }\n}\n\nexport abstract class StoreAwareComponent<\n    PROPS, \n    SHARED_STATE = {},\n    SCHEMA = {},\n> extends ComponentWrapper<SCHEMA> {\n\n    storeAware: StoreAware<PROPS>\n    store: Store\n    private sharedState = new SharedStateContainer<SHARED_STATE>()\n\n    constructor(store: Store, name: string, props?: PROPS, schema?: {}) {\n        super(name, schema || {})\n        this.storeAware = new Connector<PROPS>(store, props, this)\n        this.store = store\n    }\n\n    abstract componentWillReceiveProps(props: PROPS, nextProps: PROPS): void\n\n    getSharedState(): SHARED_STATE {\n        return this.sharedState.get()\n    }\n\n    setSharedState(sharedState: SHARED_STATE): void {\n        return this.sharedState.set(sharedState)\n    }\n}\n\n/**\n * Watches the whole store\n */\nexport abstract class StoreAwareSystem<\n    PROPS, \n    SHARED_STATE = {},\n    SCHEMA = {},\n> extends SystemWrapper<SCHEMA> {\n    \n    storeAware: StoreAware<PROPS>\n    store: Store\n    private sharedState = new SharedStateContainer<SHARED_STATE>()\n\n    constructor(store: Store, name: string, props?: PROPS, schema?: {}) {\n        super(name, schema || {})\n        this.store = store\n        this.storeAware = new Connector<PROPS>(store, props, this)\n        this.store = store\n    }\n\n    abstract componentWillReceiveProps(props: PROPS, nextProps: PROPS): void\n\n    getSharedState(): SHARED_STATE {\n        return this.sharedState.get()\n    }\n\n    setSharedState(sharedState: SHARED_STATE): void {\n        return this.sharedState.set(sharedState)\n    }\n}\n\n/**\n * Maintains a 1:1 relationship between a store object we want to watch, and\n * an aframe entity component instance\n */\nexport abstract class StoreAwareRepositoryComponent<\n    PROPS, \n    STORE_OBJECT extends RepositoryMember, \n    STORE_REPOSITORY extends BaseRepository<STORE_OBJECT>, \n    SCHEMA = {},\n> extends StoreAwareComponent<PROPS, Map<string, any>, SCHEMA> {\n\n    constructor(store: Store, name: string, props?: PROPS, schema?: {}) {\n        super(store, name, props, schema)\n        this.setSharedState(new Map<string, any>())\n    }\n\n    componentWillReceiveProps(props: PROPS, nextProps: PROPS): void {\n        // create entities that should exist\n        const toCreate = this.determineEntitiesToCreate(props, nextProps)\n        toCreate.forEach(STORE_OBJECT => this.createEntity(STORE_OBJECT))\n\n        // destroy entities that shouldn't exist \n        const toDestroy = this.determineEntitiesToDestroy(props, nextProps)\n        toDestroy.forEach(STORE_OBJECT => this.destroyEntity(STORE_OBJECT))\n\n        // update entities if needed\n        const toUpdate = this.determineEntitiesToUpdate(props, nextProps)\n        toUpdate.forEach(STORE_OBJECT => this.updateEntity(STORE_OBJECT))\n    }\n\n    determineEntitiesToCreate(props: PROPS, nextProps: PROPS): STORE_OBJECT[] {\n        const oldR = this.resolveRepository(props)\n        const newR = this.resolveRepository(nextProps)\n        return newR.sort.filter(b => oldR.sort.indexOf(b) < 0).map( i => newR.items[i])\n    }\n\n    determineEntitiesToDestroy(props: PROPS, nextProps: PROPS): STORE_OBJECT[] {\n        const oldR = this.resolveRepository(props)\n        const newR = this.resolveRepository(nextProps)\n        return oldR.sort.filter(b => newR.sort.indexOf(b) < 0).map( i => oldR.items[i])\n    }\n\n    determineEntitiesToUpdate(props: PROPS, nextProps: PROPS): STORE_OBJECT[] {\n        const oldR = this.resolveRepository(props)\n        const newR = this.resolveRepository(nextProps)\n        const toDestroyIds = this.determineEntitiesToDestroy(props, nextProps).map( STORE_OBJECT => STORE_OBJECT.id )\n\n        const toUpdate = newR\n                .sort.filter(b => \n                    toDestroyIds.indexOf(b) < 0 \n                    && oldR.sort.indexOf(b) > -1\n                    && newR.sort.indexOf(b) > -1\n                    && newR.items[b] !== oldR.items[b]\n                )\n        return toUpdate.map( i => newR.items[i])\n    }\n\n    abstract resolveRepository(props: PROPS): STORE_REPOSITORY\n    abstract resolveStoreObject(data: SCHEMA): STORE_OBJECT\n\n    //\n    // -- store object / aframe component lifecycle functions\n    //\n    abstract onStoreObjectCreate(bullet: STORE_OBJECT): AFrame.ANode\n    onStoreObjectUpdate(entity: STORE_OBJECT, component: this): void {\n        // override noop\n    }\n\n    // called right before the aframe component is destroyed\n    beforeStoreObjectDestroy(entity: STORE_OBJECT, w: this): void {\n        // override noop\n    }\n\n    private updateEntity(entity: STORE_OBJECT): void {\n        const c = this.getEntityComponentsFor(entity.id)\n        this.onStoreObjectUpdate(entity, c)\n    }\n\n    private createEntity(entity: STORE_OBJECT, parent?: AFrame.ANode): void {\n        const aframeComponent = this.onStoreObjectCreate(entity)\n        if (aframeComponent && parent) {\n            // attach to optional parent\n            parent.appendChild(aframeComponent)\n        } else {\n            // otherwise attach to scene\n            document.querySelector(\"a-scene\").appendChild(aframeComponent)\n        }\n    }\n\n    private destroyEntity(entity: STORE_OBJECT): void {\n        const aframeComponent = this.getEntityComponentsFor(entity.id)\n        if (aframeComponent) {\n            this.beforeStoreObjectDestroy(entity, aframeComponent)\n            aframeComponent.destroy()\n        }\n    }\n\n    private getEntityComponentsFor(id: string): this {\n        return this.getSharedState().get(id)\n    }\n\n    private updateEntityComponents(id: string, w: this) {\n        this.getSharedState().set(id, w)\n    }\n\n    //\n    // -- aframe component lifecycle functions\n    //\n\n    /**\n     * by default, register aframe component instance\n     */\n    init() {\n        super.init()\n        const storeObject: STORE_OBJECT = this.resolveStoreObject(this.data)\n        this.updateEntityComponents(storeObject.id, this)\n    }\n\n}\n\ninterface ReduxConnectedComponentSchema {\n    readonly propsToHandlerMapping: BaseMap<string>\n}\n\nexport class ReduxConnectedComponent extends ComponentWrapper<ReduxConnectedComponentSchema, ReduxConnectedSystem> {\n\n    constructor() {\n        super(\"redux-connected\")\n    }\n\n    init() {\n        this.system.connect(this)\n    }\n\n}\n\ninterface ReduxConnectedProps {}\n\ninterface ReduxConnectorSharedState {\n    propsToComponentMapping: BaseMap<ComponentFunction[]>\n}\n\ninterface ComponentFunction {\n    component: ReduxConnectedComponent\n    callback: string\n}\n\nexport class ReduxConnectedSystem extends StoreAwareSystem<{}, ReduxConnectorSharedState> {\n    constructor(store: Store, props: {}) {\n        super(store, \"redux-connected\", props)\n\n        this.setSharedState({\n            propsToComponentMapping: {}\n        })\n        new ReduxConnectedComponent().register()\n    }\n\n    connect(component: ReduxConnectedComponent) {\n        // add store dispatch\n        component.el[\"dispatch\"] = this.store.dispatch\n\n        // handle cleaning up - remove references to destroyed entities\n        const that = this\n        component.el.addEventListener(\"componentremoved\", (evt) => {\n            const state = that.getSharedState()\n            const { propsToComponentMapping } = state\n            const updated: BaseMap<ComponentFunction[]> = Object.keys(propsToComponentMapping).reduce( \n                (acc, k) => {\n                    return {\n                        ...acc,\n                        [k]: propsToComponentMapping[k].filter( f => f.component.el != component.el)\n                    }\n                },\n                {}\n            )\n\n            that.setSharedState({\n                propsToComponentMapping: updated,\n            })\n\n            // console.log(\"after: \", that.getSharedState().propsToComponentMapping)\n        })\n\n        const propsToHandlerMapping = component.data\n\n        const state = this.getSharedState()\n\n        const propsToComponentMapping: BaseMap<ComponentFunction[]> = Object.keys(propsToHandlerMapping)\n            .reduce( (acc, propKey) => {\n                const propComponentFunctions = state.propsToComponentMapping[propKey] || []\n                const callback = propsToHandlerMapping[propKey]\n                \n                return {\n                    ...acc,\n                    [propKey]: [...propComponentFunctions, {\n                        component,\n                        callback,\n                    }]\n                }}, \n                { ...state.propsToComponentMapping }\n            )\n\n        this.setSharedState({\n            propsToComponentMapping, \n        })\n\n        // console.log(this.getSharedState())\n    }\n\n    componentWillReceiveProps(props: ReduxConnectedProps, nextProps: ReduxConnectedProps) {\n        const state = this.getSharedState()\n        const { propsToComponentMapping } = state\n        Object.keys(propsToComponentMapping).forEach( k => {\n            if (props[k] !== nextProps[k]) {\n                // console.log(\"!! change detected for\", k)\n                // notify listeners for that change\n                propsToComponentMapping[k].forEach( listener => {\n                    listener.component.el.emit(listener.callback, {\n                        oldState: props[k],\n                        newState: nextProps[k],\n                    })\n                })\n            }\n        })\n    }\n}\n\nexport function dispatch(component: ComponentWrapper, action: {}): void {\n    if (!component.el) {\n        return\n    }\n    const dispatcher = component.el[\"dispatch\"]\n    if (dispatcher) {\n        dispatcher(action)\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./aframe_wrapper_store_aware.ts","import { ComponentWrapper, SystemWrapper } from \"./aframe_wrapper\"\nimport { EntityBuilder } from \"./entity_builder\"\nexport {\n    ComponentWrapper,\n    SystemWrapper,\n    EntityBuilder,\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!../node_modules/aframe-typescript-toolkit/src/index.ts","////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// helpers\n\nconst hasMethod = (obj: {}, name: string) => {\n    const desc = Object.getOwnPropertyDescriptor (obj, name)\n    return !!desc && typeof desc.value === \"function\"\n}\n\nconst getInstanceMethodNames = (obj: {}, stop: {}) => {\n    const array: string[] = []\n    let proto = Object.getPrototypeOf (obj)\n    while (proto && proto !== stop) {\n        Object.getOwnPropertyNames (proto)\n        .forEach (name => {\n            if (name !== \"constructor\") {\n            if (hasMethod (proto, name)) {\n                array.push (name)\n            }\n            }\n        })\n        proto = Object.getPrototypeOf(proto)\n    }\n    return array\n}\n\nexport abstract class ComponentWrapper<SCHEMA = {}, SYSTEM extends AFrame.System = AFrame.System> \n    implements AFrame.Component<SCHEMA, SYSTEM> {\n\n    el: AFrame.Entity\n    id: string\n    data: SCHEMA\n    schema: any\n    system: SYSTEM\n    name: string\n\n    constructor(name: string, schema?: {}) {\n        this.name = name\n        this.schema = schema || {}\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // default aframe core function implementations\n\n    remove() {}\n    update(oldData: {}) {}\n    extendSchema(update: {}) {}\n    flushToDOM() {}\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // default aframe core function implementations\n\n    init() {}\n    pause() {}\n    play() {}\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // special wrapper functions implementations\n\n    merge() {\n        const funcs = getInstanceMethodNames(this, Object.prototype)\n        funcs.forEach( k => this[k] = this[k])\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // special wrapper functions implementations\n\n    destroy() {\n        const parent = this.el.parentElement\n        if (!!parent) {\n            parent.removeChild(this.el)\n        }\n    }\n\n    register() {\n        this.merge()\n        AFRAME.registerComponent(this.name, this)\n\n        return this\n    }\n\n    registerCallback(callbackName: string, fn: Function) {\n        this.el.addEventListener(callbackName, fn.bind(this))\n    }\n}\n\nexport abstract class SystemWrapper<SCHEMA = {}>\n    implements AFrame.System {\n\n    data: SCHEMA\n    schema: any\n    system: any\n    name: string\n\n    constructor(name: string, schema?: {}) {\n        this.name = name\n        this.schema = schema\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // default aframe core function implementations\n\n    init() {}\n    pause() {}\n    play() {}\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    // special wrapper functions implementations\n\n    merge() {\n        const funcs = getInstanceMethodNames(this, Object.prototype)\n        funcs.forEach( k => this[k] = this[k])\n    }\n\n    register() {\n        this.merge()\n        AFRAME.registerSystem(this.name, this)\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!../node_modules/aframe-typescript-toolkit/src/aframe_wrapper.ts","import { ComponentWrapper } from \"./aframe_wrapper\"\n\nexport interface Attributes {\n    [key: string]: {}\n}\n\nexport class EntityBuilder {\n    private entity: AFrame.Entity\n\n    constructor(type: string, attributes?: Attributes) {\n        this.entity = <AFrame.Entity> document.createElement(type)\n        if (attributes) {\n            this.setAttributes(attributes)\n        }\n    }\n\n    static create(type: string, attributes: Attributes, children?: EntityBuilder[]): EntityBuilder {\n        const builder = new EntityBuilder(type, attributes)\n        if (!!children) {\n            children.forEach( c => {\n                c.attachTo(builder.entity)\n            })\n        }\n        return builder\n    }\n\n    set(a: string, b?: any, c?: {}): EntityBuilder {\n        if (!!b && !!c) {\n            this.entity.setAttribute(a, b, c)\n        } else if (!!b) {\n            this.entity.setAttribute(a, b || \"\")\n        } else {\n            this.entity.setAttribute(a, \"\")\n        }\n        return this\n    }\n\n    setAttributes(attributes: Attributes): EntityBuilder {\n        Object.keys(attributes).forEach( k => {\n            this.set(k, attributes[k])            \n        })\n        return this\n    }\n\n    toEntity(): AFrame.Entity {\n        return this.entity\n    }\n\n    attachTo(parent?: EntityBuilder | AFrame.ANode | AFrame.Scene | AFrame.Entity | ComponentWrapper): EntityBuilder {\n        if (!parent) {\n            // attach to the scene by default\n            document.querySelector(\"a-scene\").appendChild(this.entity)\n            return this\n        }\n\n        // a parent was specified\n        if (\"el\" in parent) {\n            // there's an element in this parent; attach the entity\n            // being created there\n            parent.el.appendChild(this.entity)\n        } else {\n            // there isn't; attach directly\n            if (\"appendChild\" in parent) {\n                parent.appendChild(this.entity)\n            } else {\n                // parent.attach(this.entity)\n            }\n        }    \n\n        return this\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!../node_modules/aframe-typescript-toolkit/src/entity_builder.ts"],"sourceRoot":""}